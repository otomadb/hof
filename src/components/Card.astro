---
import getThumbnail from "./getThumbnail";
import pseudoThumbnail from "../images/pseudo_thumbnail.jpg";
import { Image } from "astro:assets";
interface Props {
  title: string;
  url: string | null;
  type: string;
}

const { title, type, url } = Astro.props;

const thumbnail = await getThumbnail(type, url);
const furl = url ? new URL(url) : "#";
---

<a
  class="group relative h-[108px] flex rounded-xl overflow-hidden shadow-lg border border-slate-200 hover:scale-[102.5%] transition-transform duration-300"
  href={url}
>
  <div class="relative z-1">
    {<Image
      class="h-full object-cover bg-black"
      src={thumbnail ? thumbnail : pseudoThumbnail}
      alt={title}
      width={192}
      height={108}
      loading="lazy"
    />}
  </div>
  <div class="relative flex-grow">
    {<Image
      class="absolute top-0 left-0 object-cover w-full h-full z-[-1] select-none"
      src={thumbnail ? thumbnail : pseudoThumbnail}
      alt={title}
      width={512}
      height={288}
      loading="lazy"
    />}
    <div
      class="absolute inset-0 bg-white/90 py-4 px-8 flex flex-col"
      style={{ backdropFilter: "blur(2px)" }}
    >
      <p class="flex-grow text-slate-700 break-all text-xl">{title}</p>
      <p class="flex-shrink-0 font-mono text-sm text-slate-500">{furl}</p>
    </div>
  </div>
</a>
